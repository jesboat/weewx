<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:v="urn:schemas-microsoft-com:vml">
  <!-- $Revision$ -->
  <!-- $Author$ -->
  <!-- $Date$ -->
  <head>
    <meta content="en-us" http-equiv="Content-Language" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>weewx quick-start for linux</title>
    <!-- CSS -->
    <link href="weewx_docs.css" rel="stylesheet" />
    <!-- JavaScript -->
    <style type="text/css">
.cmdtbl {
  width: 100%;
}
.cmdcell {
  width: 50%;
  border: none;
}
.cmdhdr {
  font-weight: bold;
  font-size: 80%;
  border: none;
}
.os-icons {
  float: right;
}
img {
  width: 60px;
}
h3 {
  background-color: #ffffff;
  border: none;
  padding-left: 0px;
}
.locations {
  margin-left: 20px;
}
    </style>
  </head>
  <body>
    <h1 class="title">weewx: Quick Start Guide for Linux</h1>
    <p class='os-icons'>      
      <img src='logo-linux.png'/>
      <img src='logo-debian.png'/>
      <img src='logo-ubuntu.png'/>
      <img src='logo-mint.png'/><br/>
      <img src='logo-redhat.png'/>
      <img src='logo-centos.png'/>
      <img src='logo-fedora.png'/>
    </p>
    <p>
      This is a guide to install weewx on Linux systems from source.
    </p>
    <p>
      Installing from source will result in the following:
      <table class='locations'>
        <tr>
          <td align='right'>configuration file: </td>
          <td class='tty'>/home/weewx/weewx.conf</td>
        </tr>
        <tr>
          <td align='right'>skins and templates: </td>
          <td class='tty'>/home/weewx/skins/</td>
        </tr>
        <tr>
          <td align='right'>sqlite databases: </td>
          <td class='tty'>/home/weewx/archive/</td>
        </tr>
        <tr>
          <td align='right'>web pages and images: </td>
          <td class='tty'>/home/weewx/public_html/</td>
        </tr>
      </table>
    </p>

    <p style='clear: both'></p>

    <h3>Install Prerequisites</h3>
    <p>
      Install the required python packages:
    </p>
    <table class='cmdtbl'>
      <tr valign='top'>
        <td class='cmdhdr'>Debian, Ubuntu, Mint</td>
        <td class='cmdhdr'>Redhat, CentOS, Fedora</td>
      </tr>
      <tr valign='top'>
        <td class='cmdcell'>
          <p class='tty' style='margin-left: 0'>
            sudo apt-get install python-configobj<br/>
            sudo apt-get install python-cheetah<br/>
            sudo apt-get install python-imaging<br/>
          </p>
        </td>
        <td class='cmdcell'>
          <p class='tty' style='margin-left: 0'>
            sudo yum install python-configobj<br/>
            sudo yum install python-cheetah<br/>
            sudo yum install python-imaging<br/>
          </p>
        </td>
      </tr>
    </table>

    <p>
      If the station is connected by serial or USB, install one of these packages:
    </p>
    <table class='cmdtbl'>
      <tr valign='top'>
        <td class='cmdcell'>
          <p class='tty' style='margin-left: 0'>
            sudo apt-get install python-serial<br/>
            sudo apt-get install python-usb<br/>
          </p>
        </td>
        <td class='cmdcell'>
          <p class='tty' style='margin-left: 0'>
            sudo yum install pyserial<br/>
            sudo yum install pyusb<br/>
          </p>
        </td>
      </tr>
    </table>

    <p>
      For extended almanac information, install these packages:
    </p>
    <table class='cmdtbl'>
      <tr valign='top'>
        <td class='cmdcell'>
          <p class="tty" style='margin-left: 0'>
            sudo apt-get install python-dev<br/>
            sudo apt-get install python-pip<br/>
            sudo pip install pyephem<br/>
          </p>
        </td>
        <td class='cmdcell'>
          <p class="tty" style='margin-left: 0'>
            sudo yum install pyephem<br/>
          </p>
        </td>
      </tr>
    </table>

    <h3>Download</h3>
    <p>
      Download the source archive <span class='code'>weewx-X.Y.Z.tar.gz</span> from <a href="http://sourceforge.net/projects/weewx/files">Sourceforge</a>
    </p>

    <h3>Install</h3>
    <p>
      Expand the source archive:
    </p>
    <p class="tty">
      tar xvf weewx-X.Y.Z.tar.gz
    </p>
    <p>
      Change directory:
    </p>
    <p class="tty">
      cd weewx-X.Y.Z
    </p>
    <p>
      Then build and install:
    </p>
    <p class="tty">
      ./setup.py build<br/>
      sudo ./setup.py install
    </p>
    <p>
      The install will place weewx in <span class='code'>/home/weewx</span>, so sudo is probably required.
    </p>

    <h3>Configure</h3>
    <p>
      Edit the configuration file <span class='code'>/home/weewx/weewx.conf</span>.  Set at least the following:
      <ul>
        <li>location</li>
        <li>latitude</li>
        <li>longitude</li>
        <li>altitude</li>
        <li>station_type</li>
      </ul>
      Also set any parameters specific to the station, such as the <span class='code'>port</span> for stations connected via serial port.
    </p>
    <p>
      weewx must be restarted for changes to the configuration file to take effect.
    </p>
    <p>
      If you have a weather station from the Davis Vantage series, many of the configuration data will be downloaded from your hardware, including altitude, archive interval, and the start of your rain year. If you have not set these, you can either do so by following the instructions in the manual that came with your weather station, or by using the configuration utility config_vp.py, which is included with weewx. To see how to run config_vp.py:
    </p>
    <p class='tty'>
# This works only for Davis Vantage weather stations!<br/>
cd /home/weewx<br/>
./bin/config_vp.py weewx.conf --help<br/>
    </p>

    <h3>Run</h3>
    <p>
      Run the main program from the command line:
    </p>
    <p class="tty">
      cd /home/weewx<br/>
      ./bin/weewxd.py weewx.conf<br/>
    </p>
    <p>
      Or as a daemon automatically when the computer starts:
    </p>
    <table class='cmdtbl'>
      <tr valign='top'>
        <td class='cmdhdr'>Debian, Ubuntu, Mint</td>
        <td class='cmdhdr'>Redhat, CentOS, Fedora</td>
      </tr>
      <tr valign='top'>
        <td class='cmdcell'>
          <p class="tty" style='margin-left: 0'>
            sudo cp util/init.d/weewx.debian /etc/init.d/weewx<br/>
            sudo chmod +x /etc/init.d/weewx<br/>
            sudo update-rc.d weewx defaults 98<br/>
            sudo /etc/init.d/weewx start<br/>
          </p>
        </td>
        <td class='cmdcell'>
          <p class="tty" style='margin-left: 0'>
            sudo cp util/init.d/weewx.redhat /etc/init.d/weewx<br/>
            sudo chmod +x /etc/init.d/weewx<br/>
            sudo chkconfig weewx on<br/>
            sudo /etc/init.d/weewx start<br/>
          </p>
        </td>
      </tr>
    </table>

    <h3>Verify</h3>
    <p>
      After 5 minutes, open the station web page in a web browser.  You should see the default weewx page with generic station information and data.
    </p>
    <p class='tty'>
      file:///usr/lib/weewx/html/index.html
    </p>

    <h3>Status</h3>
    <p>
      Look in the system log for messages from weewx.
    </p>
    <p class='tty'>
      sudo tail -f /var/log/messages
    </p>

    <h3>Customize</h3>
    <p>
      To enable uploads such as Weather Underground or to customize reports, modify the configuration file <span class='code'>/etc/weewx.conf</span>.  See the <a href="usersguide.htm">User Guide</a> and <a href="customizing.htm">Customization Guide</a> for details.
    </p>
    <p>
      weewx must be restarted for configuration file changes to take effect.
    </p>

    <h3>Uninstall</h3>
    <p>
      To uninstall, simply delete the directory <span class='code'>/home/weewx</span>.  This will delete weewx, configuration files, and data.
    </p>
    <p class='tty'>
      sudo rm -r /home/weewx
      sudo rm /etc/init.d/weewx
    </p>
  </body>
</html>
